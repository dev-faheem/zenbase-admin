(this["webpackJsonpzenbase-admin"]=this["webpackJsonpzenbase-admin"]||[]).push([[0],{146:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(19),s=n.n(c),i=n(13),l=(n(146),n(45)),o=n(9),u=n(8),d=n.n(u),j=n(12),b=n(3),m=n.n(b),h=n(2);function O(e){var t=e.auth,n=void 0!==t&&t,a=e.fluid,r=void 0===a||a;return!0===n&&(r=!1),Object(h.jsx)("div",{className:m()("nk-footer",{"nk-auth-footer-full":n}),children:Object(h.jsx)("div",{className:m()({container:!r,"container-fluid":r}),children:Object(h.jsxs)("div",{className:"nk-footer-wrap",children:[Object(h.jsx)("div",{className:"nk-footer-copyright",children:"\xa9 2020 Zenbase. All rights reserved \xa9"}),Object(h.jsx)("div",{className:"nk-footer-links",children:Object(h.jsxs)("ul",{className:"nav nav-sm",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",target:"_blank",rel:"noreferrer",href:"http://zenbase.us",children:"Terms"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",target:"_blank",rel:"noreferrer",href:"http://zenbase.us",children:"Privacy"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",target:"_blank",rel:"noreferrer",href:"http://zenbase.us",children:"Help"})})]})})]})})})}function x(e){var t=e.children;return Object(h.jsx)("div",{className:"nk-app-root",children:Object(h.jsx)("div",{className:"nk-main ",children:Object(h.jsx)("div",{className:"nk-wrap nk-wrap-nosidebar",children:Object(h.jsxs)("div",{className:"nk-content ",children:[Object(h.jsxs)("div",{className:"nk-block nk-block-middle nk-auth-body wide-xs",children:[Object(h.jsx)("div",{className:"brand-logo pb-4 text-center",children:Object(h.jsxs)("a",{href:"/",className:"logo-link",children:[Object(h.jsx)("img",{className:"logo-light logo-img logo-img-lg",src:"images/zenbase.png",alt:"logo"}),Object(h.jsx)("img",{className:"logo-dark logo-img logo-img-lg",src:"images/zenbase.png",alt:"logo-dark"})]})}),t]}),Object(h.jsx)(O,{})]})})})})}var f=n(15);function p(e){var t=e.id,n=e.label,a=e.placeholder,r=e.helper,c=void 0===r?null:r,s=e.type,i=void 0===s?"text":s;return Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsxs)("div",{className:"form-label-group",children:[Object(h.jsx)("label",{className:"form-label",htmlFor:t,children:n}),c]}),Object(h.jsx)(f.b,{type:i,className:"form-control form-control-lg",id:t,name:t,placeholder:a}),Object(h.jsx)(f.a,{component:"div",className:"text-danger",name:t})]})}var g=n(21),v=n.n(g),k=function(e){var t,n;console.error(e),(null===(t=e.response)||void 0===t?void 0:t.data.error)?v()({title:"Something went wrong",text:null===(n=e.response)||void 0===n?void 0:n.data.error}):v()({title:"Something went wrong",text:e.message})},N=n(11),w=n.n(N),y=function(){var e=localStorage.getItem("zenbase.user");return!!e&&JSON.parse(e)},S=function(){return!!localStorage.getItem("zenbase.user")},C=function(e){var t=JSON.stringify(e);localStorage.setItem("zenbase.user",t)},P=function(){localStorage.removeItem("zenbase.user")},A=function(){return{user:y(),userExists:S(),getUser:y,saveUser:C,hasUser:S,deleteUser:P}};var U=n(10),E=function(e){switch(e){case"user":return"User";case"admin":return"Administrator";default:return"Guest"}},D=function(e){L(e)||document.body.classList.add(e)},V=function(e){L(e)&&document.body.classList.remove(e)},L=function(e){return document.body.classList.contains(e)},F=function(e){L(e)?V(e):D(e)},M=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!0===e?D("dark-mode"):V("dark-mode")},z=function(){R()?M(!1):M(!0)},R=function(){return L("dark-mode")};function I(e){var t=e.setSidebar,n=(e.sidebar,A().user),r={addTemplateClass:D,removeTemplateClass:V,hasTemplateClass:L,toggleTemplateClass:F,setDarkMode:M,toggleDarkMode:z,getDarkMode:R}.setDarkMode,c=Object(a.useState)(!1),s=Object(U.a)(c,2),i=s[0];s[1];return Object(a.useEffect)((function(){r(i)}),[i,r]),Object(h.jsx)("div",{className:"nk-header nk-header-fixed is-light",children:Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsxs)("div",{className:"nk-header-wrap",children:[Object(h.jsx)("div",{className:"nk-menu-trigger d-xl-none ml-n1",children:Object(h.jsx)("a",{href:"#/",className:"nk-nav-toggle nk-quick-nav-icon","data-target":"sidebarMenu",onClick:function(e){e.preventDefault(),t(!0)},children:Object(h.jsx)("em",{className:"icon ni ni-menu"})})}),Object(h.jsx)("div",{className:"nk-header-brand d-xl-none",children:Object(h.jsxs)("a",{href:"/",className:"logo-link",children:[Object(h.jsx)("img",{className:"logo-light logo-img",src:"/images/zenbase.png",alt:"logo"}),Object(h.jsx)("img",{className:"logo-dark logo-img",src:"/images/zenbase.png",alt:"logo-dark"})]})}),Object(h.jsx)("div",{className:"nk-header-tools",children:Object(h.jsx)("ul",{className:"nk-quick-nav",children:Object(h.jsx)("li",{children:Object(h.jsx)("a",{href:"/password",children:Object(h.jsxs)("div",{className:"user-toggle",children:[Object(h.jsx)("div",{className:"user-avatar sm",children:Object(h.jsx)("em",{className:"icon ni ni-user-alt"})}),Object(h.jsxs)("div",{className:"user-info d-none d-md-block",children:[Object(h.jsx)("div",{className:"user-status",children:E(n.role)||"Guest"}),Object(h.jsx)("div",{className:"user-name",children:n.name||"Unknown User"})]})]})})})})})]})})})}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#/",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{title:e,icon:t,to:n,children:a,badge:r,heading:!1,admin:c}}function T(e,t){return{title:e,heading:!0,admin:t}}var q=[_("Dashboard","layout-fill","#"),T("Songs"),_("Search","search","/songs"),_("Upload","upload","/songs/create"),_("Categories","view-grid-fill","/categories"),T("Administration"),_("Global Settings","setting","/settings"),_("Users","users-fill","/users"),_("Admins","user-circle-fill","/admins"),T("Account"),_("Logout","signout","/logout")];function G(e){var t=e.title,n=e.admin,a=A().user;return n&&"admin"!==a.role?null:Object(h.jsx)("li",{className:"nk-menu-heading",children:Object(h.jsx)("h6",{className:"overline-title text-primary-alt",children:t})})}function J(e){var t=e.title,n=e.icon,r=e.to,c=e.children,s=(e.badge,e.admin),i=A().user,l=Object(a.useState)(!1),u=Object(U.a)(l,2),d=u[0],j=u[1],b=Object(o.g)();return s&&"admin"!==i.role?null:Object(h.jsxs)("li",{className:m()("nk-menu-item",{"has-sub":null!=c}),onClick:function(e){return j(!d)},children:[Object(h.jsxs)("a",{href:r,onClick:function(e){e.preventDefault(),b.push(r)},className:m()("nk-menu-link",{"nk-menu-toggle":null!=c}),children:[n?Object(h.jsx)("span",{className:"nk-menu-icon",children:Object(h.jsx)("em",{className:m()("icon","ni","ni-"+n)})}):null,Object(h.jsx)("span",{className:"nk-menu-text",children:t})]}),null!=c?Object(h.jsx)("ul",{className:"nk-menu-sub",style:{display:null==c||d?"block":"none"},children:c.map(B)}):null]})}function B(e,t){return e.heading?Object(h.jsx)(G,Object(i.a)({},e),t):Object(h.jsx)(J,Object(i.a)({},e),t)}function H(e){var t=e.setSidebar,n=e.sidebar;return Object(h.jsxs)("div",{className:m()("nk-sidebar nk-sidebar-fixed",{"nk-sidebar-active":n}),"data-content":"sidebarMenu",children:[Object(h.jsxs)("div",{className:"nk-sidebar-element nk-sidebar-head",children:[Object(h.jsx)("div",{className:"nk-menu-trigger",children:Object(h.jsx)("a",{href:"#/",className:"nk-nav-toggle nk-quick-nav-icon d-xl-none","data-target":"sidebarMenu",onClick:function(){return t(!1)},children:Object(h.jsx)("em",{className:"icon ni ni-arrow-left"})})}),Object(h.jsx)("div",{className:"nk-sidebar-brand",children:Object(h.jsxs)("a",{href:"/dashboard",className:"logo-link nk-sidebar-logo d-flex",children:[Object(h.jsx)("img",{className:"logo-light logo-img",src:"/images/zenbase.png",alt:"logo"}),Object(h.jsx)("img",{className:"logo-dark logo-img",src:"/images/zenbase.png",alt:"logo-dark"}),Object(h.jsx)("h4",{className:"ml-3",children:"Zenbase"})]})})]}),Object(h.jsx)("div",{className:"nk-sidebar-element nk-sidebar-body",children:Object(h.jsx)("div",{className:"nk-sidebar-content",children:Object(h.jsx)("div",{className:"nk-sidebar-menu","data-simplebar":!0,children:Object(h.jsx)("ul",{className:"nk-menu",children:q.map(B)})})})})]})}function Y(e){var t=e.children,n=e.fluid,r=void 0===n||n,c=Object(a.useState)(!1),s=Object(U.a)(c,2),i=s[0],l=s[1],u=Object(o.g)(),d=A().getUser;return Object(a.useEffect)((function(){!0===i?document.body.classList.add("nav-shown"):document.body.classList.remove("nav-shown")}),[i]),Object(a.useEffect)((function(){document.body.classList.add("dark-mode");var e=d();e?w.a.interceptors.request.use((function(t){return t.headers.Authorization=e.token,t})):(console.log("User is invalid",{user:e}),u.push("/login"))}),[]),Object(h.jsx)("div",{className:"nk-app-root",children:Object(h.jsxs)("div",{className:"nk-main",children:[Object(h.jsx)(H,{sidebar:i,setSidebar:l}),Object(h.jsxs)("div",{className:"nk-wrap",children:[Object(h.jsx)(I,{sidebar:i,setSidebar:l}),i&&Object(h.jsx)("div",{className:"nk-sidebar-overlay","data-target":"sidebarMenu"}),Object(h.jsx)("div",{className:"nk-content",children:Object(h.jsx)("div",{className:m()({"container-fluid":r,container:!r}),children:Object(h.jsx)("div",{className:"nk-content-inner",children:Object(h.jsx)("div",{className:"nk-content-body",children:t})})})}),Object(h.jsx)(O,{fluid:r})]})]})})}function Z(e){var t=e.columns,n=e.rows,a=e.page,r=e.onChangePage,c=e.previousPage,s=e.nextPage,i=e.search,l=e.onSearch,o=e.showSearch,u=void 0===o||o,d=e.showPagination,j=void 0===d||d;return Object(h.jsxs)(h.Fragment,{children:[u&&Object(h.jsx)("div",{className:"d-flex mb-4",children:Object(h.jsx)("input",{type:"search",className:"form-control w-30",value:i,onChange:function(e){return null===l||void 0===l?void 0:l(e.target.value)},placeholder:"Search..."})}),Object(h.jsxs)("table",{className:"table table-striped table-bordered",children:[Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:t.map((function(e,t){return Object(h.jsx)("th",{children:e.name},t)}))})}),Object(h.jsx)("tbody",{children:n.map((function(e,n){return Object(h.jsx)("tr",{children:t.map((function(t,a){return Object(h.jsx)("td",{children:t.selector(e,n)},a)}))},n)}))})]}),j&&Object(h.jsxs)("div",{className:"mt-4 d-flex justify-content-between",children:[Object(h.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){null===r||void 0===r||r(c)},disabled:null==c||c==a,children:"Previous"}),Object(h.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){null===r||void 0===r||r(s)},disabled:null==s||s==a,children:"Next"})]})]})}var K=n(28),Q=n(131),W=[{name:"ID",selector:function(e,t){return t+1}},{name:"Name",selector:function(e){return e.name}},{name:"Artwork",selector:function(e){return Object(h.jsx)("img",{className:"song-artwork",src:e.artwork})}},{name:"Artist",selector:function(e){return e.artist.map((function(e){return(null===e||void 0===e?void 0:e.name)||Object(h.jsx)("i",{className:"text-danger",children:"Deleted User"})})).join(", ")}},{name:"Source",selector:function(e){return Object(h.jsx)("audio",{src:e.source,controls:!0})}},{name:"Duration",selector:function(e){return Object(h.jsxs)("div",{children:[e.duration," seconds"]})}},{name:"",selector:function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){v()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this song!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(t){var n,a;t&&(w.a.delete("/songs/"+e._id),null===(n=window)||void 0===n||null===(a=n.location)||void 0===a||a.reload())}))},children:"Delete"})})}}];var X=n(18),$=n(57),ee=n(5),te=n(32),ne=n(137),ae=n(139),re=["values","label","name"],ce=["type","label","placeholder","id"];function se(e){var t=e.values,n=e.label,a=e.name,r=Object($.a)(e,re),c=Object(f.d)({name:a}),s=Object(U.a)(c,3),l=s[0],o=s[1],u=(s[2],Object(f.f)());return Object(h.jsxs)(ee.i,{children:[n&&Object(h.jsx)(ee.k,{children:n}),Object(h.jsx)(ne.a,Object(i.a)(Object(i.a)(Object(i.a)({options:t},l),r),{},{onChange:function(e){u.setFieldValue(a,e)},value:l.value})),o.touched&&o.error&&Object(h.jsx)(ee.a,{color:"danger",className:"mt-2",children:o.error})]})}function ie(e){var t=e.type,n=void 0===t?"text":t,a=e.label,r=e.placeholder,c=e.id,s=Object($.a)(e,ce),l=Object(f.d)(s),o=Object(U.a)(l,3),u=o[0],d=o[1];o[2];return Object(h.jsxs)(ee.i,{children:[a&&Object(h.jsx)(ee.k,{children:a}),Object(h.jsx)(ee.j,Object(i.a)(Object(i.a)({type:n,placeholder:r,id:c,name:c},u),s)),d.touched&&d.error&&Object(h.jsx)(ee.a,{color:"danger",className:"mt-2",children:d.error})]})}function le(e){var t=e.refetch,n=te.b({name:te.c().required().label("Name")}),r=function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(),1===s.current.files.length){e.next=4;break}return u("Please attach an artwork image."),e.abrupt("return");case 4:return(a=new FormData).append("name",n.name),a.append("isPremium",n.isPremium),a.append("artwork",s.current.files[0]),e.next=10,w.a.post("/categories",a);case 10:v()({title:"Success",icon:"success",text:"Category successfully created."}),null===t||void 0===t||t(),c.resetForm();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object(f.e)({initialValues:{name:"",artwork:null,isPremium:!0},validationSchema:n,onSubmit:r}),s=Object(a.useRef)(),i=Object(a.useState)(),l=Object(U.a)(i,2),o=l[0],u=l[1];return Object(h.jsx)(ee.h,{onSubmit:c.handleSubmit,children:Object(h.jsxs)(ee.c,{className:"mt-5",children:[Object(h.jsx)(ee.f,{children:Object(h.jsx)("h5",{children:"Add New Category"})}),Object(h.jsxs)(ee.d,{children:[Object(h.jsxs)(ee.i,{children:[Object(h.jsx)(ee.k,{children:"Name"}),Object(h.jsx)(ee.j,{type:"text",value:c.values.name,onChange:function(e){return c.setFieldValue("name",e.target.value)}})]}),c.errors.name&&Object(h.jsx)(ee.a,{color:"danger",children:c.errors.name}),Object(h.jsxs)(ee.i,{children:[Object(h.jsx)(ee.k,{children:"Artwork"}),Object(h.jsx)("input",{className:"form-control",type:"file",ref:s})]}),o&&Object(h.jsx)(ee.a,{color:"danger",children:o})]}),Object(h.jsxs)(ee.e,{children:[Object(h.jsx)(ee.b,{type:"submit",color:"primary",className:"mr-2",disabled:c.isSubmitting,children:c.isSubmitting?"Uploading":"Submit"}),Object(h.jsx)(ee.b,{type:"reset",color:"warning",className:"btn-dim",onClick:function(){c.resetForm(),u()},children:"Clear"})]})]})})}var oe={api:"http://18.196.187.86:4000/admin",app:"http://18.196.187.86"},ue=n(58),de=["label","name"];function je(e){var t=e.label,n=e.name,a=Object($.a)(e,de);return Object(h.jsxs)(ee.i,{children:[t&&Object(h.jsx)(ee.k,{children:t}),Object(h.jsx)(f.b,Object(i.a)({as:ee.j,placeholder:"Enter your ".concat(n),name:n},a))]})}function be(e){var t=e.refetch,n=function(){var e=Object(j.a)(d.a.mark((function e(n,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post(oe.app+"/auth/register",Object(i.a)(Object(i.a)({},n),{},{dontAutoGenerateName:!0}));case 2:a.resetForm(),null===t||void 0===t||t();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(h.jsx)(f.c,{initialValues:{name:"",email:"",phone:"",username:"",password:"",country:"",state:""},onSubmit:n,children:function(e){return Object(h.jsx)(ee.c,{className:"card-bordered",children:Object(h.jsxs)(ee.h,{onSubmit:e.handleSubmit,children:[Object(h.jsx)(ee.f,{children:Object(h.jsx)("h5",{children:"Register a User"})}),Object(h.jsxs)(ee.d,{children:[Object(h.jsx)(je,{name:"name",label:"Name"}),Object(h.jsx)(je,{name:"email",label:"Email",type:"email"}),Object(h.jsx)(je,{name:"phone",label:"Phone"}),Object(h.jsx)(je,{name:"username",label:"Username"}),Object(h.jsx)(je,{name:"password",label:"Password",type:"password"}),Object(h.jsxs)(ee.i,{children:[Object(h.jsx)(ee.k,{children:"Country"}),Object(h.jsxs)("select",{className:"form-control",name:"country",value:e.values.country,onChange:function(t){e.setFieldValue("country",t.target.value)},children:[Object(h.jsx)("option",{selected:!0,children:"Choose a country"}),ue.Country.getAllCountries().map((function(e){return Object(h.jsx)("option",{value:e.isoCode,children:e.name})}))]})]}),e.values.country&&""!=e.values.country&&Object(h.jsxs)(ee.i,{children:[Object(h.jsx)(ee.k,{children:"State"}),Object(h.jsx)("select",{className:"form-control",name:"state",value:e.values.state,onChange:function(t){e.setFieldValue("state",t.target.value)},children:ue.State.getStatesOfCountry(e.values.country).map((function(e){return Object(h.jsx)("option",{value:e.isoCode,children:e.name})}))})]})]}),Object(h.jsx)(ee.e,{children:Object(h.jsx)(ee.b,{type:"submit",children:"Register"})})]})})}})}function me(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{path:e,component:t,exact:n}}var he=[me("/",(function(){return Object(h.jsx)(o.a,{to:"/login"})})),me("/login",(function(){var e=A().saveUser,t=Object(o.g)(),n=function(){var n=Object(j.a)(d.a.mark((function n(a){var r,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.a.post("/auth/login",a);case 3:r=n.sent,c=r.data.data,e(c),t.push("/dashboard"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),k(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsx)(x,{children:Object(h.jsx)("div",{className:"card",children:Object(h.jsxs)("div",{className:"card-inner card-inner-lg",children:[Object(h.jsx)("div",{className:"nk-block-head",children:Object(h.jsxs)("div",{className:"nk-block-head-content",children:[Object(h.jsx)("h4",{className:"nk-block-title",children:"Sign-In"}),Object(h.jsx)("div",{className:"nk-block-des",children:Object(h.jsx)("p",{children:"Access using your email and password"})})]})}),Object(h.jsx)(f.c,{initialValues:{email:"",password:""},onSubmit:n,children:function(e){var t=e.handleSubmit;return Object(h.jsxs)("form",{onSubmit:t,children:[Object(h.jsx)(p,{id:"email",label:"Email",placeholder:"Enter your email",type:"email"}),Object(h.jsx)(p,{id:"password",label:"Password",helper:Object(h.jsx)("a",{className:"link link-primary link-sm",href:"/forgot-passowrd",children:"Forgot Password?"}),placeholder:"Enter your password",type:"password"}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"Sign in"})})]})}}),Object(h.jsxs)("div",{className:"form-note-s2 text-center pt-4",children:["New on our platform? ",Object(h.jsx)(l.b,{to:"/register",children:"Create an account"})]})]})})})})),me("/register",(function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post("/auth/register",t);case 3:v()({title:"Success",text:"You are registered!",icon:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),k(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(x,{children:Object(h.jsx)("div",{className:"card",children:Object(h.jsxs)("div",{className:"card-inner card-inner-lg",children:[Object(h.jsx)("div",{className:"nk-block-head",children:Object(h.jsx)("div",{className:"nk-block-head-content",children:Object(h.jsx)("h4",{className:"nk-block-title",children:"Register Yourself"})})}),Object(h.jsx)(f.c,{initialValues:{name:"",email:"",password:""},onSubmit:e,children:function(e){var t=e.handleSubmit;return Object(h.jsxs)("form",{onSubmit:t,children:[Object(h.jsx)(p,{id:"name",label:"Display Name",placeholder:"Enter your display name"}),Object(h.jsx)(p,{id:"email",label:"Email",placeholder:"Enter your email",type:"email"}),Object(h.jsx)(p,{id:"password",label:"Password",helper:Object(h.jsx)("a",{className:"link link-primary link-sm",href:"/forgot-passowrd",children:"Forgot Password?"}),placeholder:"Enter your password",type:"password"}),Object(h.jsx)(p,{id:"confirmPassword",label:"Confirm Password",placeholder:"Re-enter your password",type:"password"}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"Create Account"})})]})}}),Object(h.jsxs)("div",{className:"form-note-s2 text-center pt-4",children:[" ","Already have an account ? ",Object(h.jsx)(l.b,{to:"/login",children:"Sign in instead"})]})]})})})})),me("/logout",(function(){var e=Object(o.g)(),t=A().deleteUser;return Object(a.useEffect)((function(){t(),e.push("/login")}),[]),Object(h.jsxs)(x,{children:[" ",Object(h.jsx)("div",{className:"brand-logo pb-4 text-center",children:Object(h.jsxs)("a",{href:"html/index.html",className:"logo-link",children:[Object(h.jsx)("img",{className:"logo-light logo-img logo-img-lg",src:"./images/logo.png",alt:"logo"}),Object(h.jsx)("img",{className:"logo-dark logo-img logo-img-lg",src:"./images/logo-dark.png",alt:"logo-dark"})]})}),Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"card-inner card-inner-lg",children:Object(h.jsx)("div",{className:"nk-block-head",children:Object(h.jsxs)("div",{className:"nk-block-head-content",children:[Object(h.jsx)("h4",{className:"nk-block-title",children:"Logout"}),Object(h.jsx)("div",{className:"nk-block-des",children:Object(h.jsx)("p",{children:"Please wait while we log you out."})}),Object(h.jsx)("button",{onClick:function(){return e.push("/login")},className:"btn btn-lg btn-primary btn-block mt-5",children:Object(h.jsx)("div",{class:"spinner-border text-dark",role:"status",children:Object(h.jsx)("span",{class:"sr-only",children:"Loading..."})})})]})})})})]})})),me("/dashboard",(function(){return Object(h.jsx)(Y,{children:"This page is reserved for future development. Please submit your ideas to populate this page."})})),me("/songs",(function(){var e=Object(a.useState)([]),t=Object(U.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(0),s=Object(U.a)(c,2),l=s[0],o=s[1],u=Object(a.useState)(),b=Object(U.a)(u,2),m=b[0],O=b[1],x=Object(a.useState)(),f=Object(U.a)(x,2),p=f[0],g=f[1],v=Object(Q.a)({page:1,search:""}),N=Object(U.a)(v,2),y=N[0],S=N[1],C=parseInt(y.page),P=y.search;Object(K.useEffect)((function(){A()}),[y]);var A=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("/songs",{params:{limit:10,page:C,search:P}});case 3:t=e.sent,r(t.data.data.results),o(t.data.data.songCount),O(t.data.data.previousPage),g(t.data.data.nextPage),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),k(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(Y,{children:Object(h.jsx)(Z,{columns:W,rows:n,page:C,totalCount:l,previousPage:m,nextPage:p,onChangePage:function(e){return S(Object(i.a)(Object(i.a)({},y),{},{page:e}))},search:P,onSearch:function(e){return S(Object(i.a)(Object(i.a)({},y),{},{search:e}))}})})})),me("/songs/create",(function(){var e=Object(K.useState)(),t=Object(U.a)(e,2),n=t[0],r=t[1],c=Object(K.useState)([]),s=Object(U.a)(c,2),i=s[0],l=s[1],u=Object(K.useState)([]),b=Object(U.a)(u,2),m=b[0],O=b[1],x=Object(K.useState)(),p=Object(U.a)(x,2),g=p[0],v=p[1],k=Object(a.useRef)(),N=Object(a.useRef)(),y=Object(o.g)(),S=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/categories");case 2:t=e.sent,n=t.data,l(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/users/artists");case 2:t=e.sent,n=t.data,O(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(K.useEffect)((function(){S(),C()}),[]);var P=te.b({name:te.c().required().label("Name")}),A=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(),1===(null===(n=k.current.files)||void 0===n?void 0:n.length)){e.next=4;break}return r("Please attach artwork file."),e.abrupt("return");case 4:if(1===(null===(a=N.current.files)||void 0===a?void 0:a.length)){e.next=7;break}return r("Please attach source file."),e.abrupt("return");case 7:return(c=new FormData).append("name",t.name),c.append("artist",t.artist.map((function(e){return e.value})).join(",")),c.append("tags",t.tags.map((function(e){return e.value})).join(",")),c.append("categories",t.categories.map((function(e){return e.value})).join(",")),c.append("source",N.current.files[0]),c.append("artwork",k.current.files[0]),c.append("duration",g||0),e.next=17,w.a.post("/songs",c);case 17:y.push("/songs");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function E(e){return new Promise((function(t){var n=URL.createObjectURL(e),a=new Audio([n]);a.addEventListener("canplaythrough",(function(){URL.revokeObjectURL(n),t(a.duration)}),!1)}))}function D(e){return V.apply(this,arguments)}function V(){return(V=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(t.target.files[0]);case 3:n=e.sent,v(Math.floor(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Cant compute duration of the song.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(h.jsx)(Y,{children:Object(h.jsx)(f.c,{initialValues:{name:"",artist:"",tags:[],categories:[]},validationSchema:P,onSubmit:A,children:function(e){var t=e.handleSubmit,a=e.values,r=e.setFieldValue,c=e.isSubmitting;return Object(h.jsx)(ee.h,{onSubmit:t,children:Object(h.jsxs)(ee.c,{children:[Object(h.jsx)(ee.f,{children:Object(h.jsx)("h4",{children:"Upload a New Song"})}),Object(h.jsxs)(ee.d,{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{className:"btn btn-sm btn-primary btn-floater",type:"button",onClick:function(){r("name",a.name.toLowerCase().split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join(""))},children:"Sentence Case"}),Object(h.jsx)(ie,{name:"name",label:"Song Name",placeholder:"Enter song name...",id:"name"})]}),Object(h.jsx)(se,{label:"Category",values:i.map((function(e){return{label:e.name,value:e._id}})),name:"categories",isMulti:!0}),Object(h.jsx)(se,{label:"Artist",values:m.map((function(e){return{label:e.name,value:e._id}})),name:"artist",isMulti:!0}),Object(h.jsxs)(ee.i,{children:[Object(h.jsx)(ee.k,{children:"Tags (used in search)"}),Object(h.jsx)(ae.a,{isMulti:!0,options:a.tags,value:a.tags,onChange:function(e){r("tags",e)},onCreateOption:function(e){r("tags",[].concat(Object(X.a)(a.tags),[{label:e,value:e}]))}})]}),Object(h.jsxs)(ee.i,{children:[Object(h.jsx)(ee.k,{children:"Artwork"}),Object(h.jsx)("input",{className:"form-control",type:"file",ref:k})]}),Object(h.jsxs)(ee.i,{children:[Object(h.jsx)(ee.k,{children:"Source"}),Object(h.jsx)("input",{className:"form-control",type:"file",ref:N,onChange:D}),Object(h.jsx)("p",{className:"text-muted text-xs",children:g&&"Detected ".concat(g," seconds")})]}),n&&Object(h.jsx)(ee.a,{color:"danger",className:"mt-3",children:n})]}),Object(h.jsx)(ee.e,{children:Object(h.jsx)(ee.b,{color:"primary",type:"submit",disabled:c,children:c?"Uploading":"Upload"})})]})})}})})})),me("/categories",(function(){var e=Object(a.useState)([]),t=Object(U.a)(e,2),n=t[0],r=t[1],c=[{name:"ID",selector:function(e,t){return t+1}},{name:"Name",selector:function(e){return e.name}},{name:"Artwork",selector:function(e){return Object(h.jsx)("img",{className:"category-artwork",src:e.artwork})}},{name:"Options",selector:function(e){return Object(h.jsx)("div",{children:Object(h.jsx)(ee.b,{color:"danger",onClick:function(){return i(e._id)},children:"Delete"})})}}],s=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/categories");case 2:t=e.sent,n=t.data,r(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.delete("/categories/"+t);case 2:v()({title:"Success",icon:"success",text:"Category successfully deleted."}),s();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(K.useEffect)((function(){s()}),[]),Object(h.jsxs)(Y,{children:[Object(h.jsx)(Z,{showSearch:!1,showPagination:!1,columns:c,rows:n}),Object(h.jsx)(le,{refetch:s})]})})),me("/tags",(function(){return Object(h.jsx)(Y,{children:"Hello Tags"})})),me("/playlists",(function(){return Object(h.jsx)(Y,{children:"Hello Playlists"})})),me("/settings",(function(){var e=te.b({distributionValue:te.a().required().label("Distribution Value")}),t=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log({values:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(Y,{children:Object(h.jsx)(f.c,{initialValues:{distributionValue:1},validationSchema:e,onSubmit:t,children:function(e){var t=e.handleSubmit,n=e.isSubmitting,a=(e.values,e.setFieldValue,e.errors),r=e.touched;return Object(h.jsx)(ee.h,{onSubmit:t,children:Object(h.jsxs)(ee.c,{children:[Object(h.jsx)(ee.d,{children:Object(h.jsxs)(ee.i,{children:[Object(h.jsx)(ee.k,{children:"Distribution Value (per second token rate)"}),Object(h.jsx)(f.b,{as:ee.j,type:"number",name:"distributionValue"}),r.distributionValue&&a.distributionValue&&Object(h.jsx)(ee.a,{color:"danger",className:"my-1",children:a.distributionValue})]})}),Object(h.jsx)(ee.e,{children:Object(h.jsx)(ee.b,{color:"primary",type:"submit",disabled:n,children:n?"Saving":"Save"})})]})})}})})})),me("/users",(function(){var e=Object(a.useState)([]),t=Object(U.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(U.a)(c,2),i=s[0],l=s[1],o=[{name:"ID",selector:function(e,t){return t+1}},{name:"Name",selector:function(e){return e.name}},{name:"Email",selector:function(e){return e.email}},{name:"Username",selector:function(e){return e.username}},{name:"Phone",selector:function(e){return e.phone}},{name:"Location",selector:function(e){var t,n;return"".concat(null===(t=ue.Country.getCountryByCode(e.country))||void 0===t?void 0:t.name,", ").concat(null===(n=ue.State.getStateByCodeAndCountry(e.state,e.country))||void 0===n?void 0:n.name)}},{name:"Account Type",selector:function(e){return e.isArtist?"Artist":e.isPremium?"Premium":"General"}},{name:"Options",selector:function(e){return Object(h.jsxs)("div",{children:[!e.isArtist&&Object(h.jsx)(ee.b,{color:"warning",className:"mr-2 btn-sm",onClick:Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.patch("/users/".concat(e._id),{isArtist:!0});case 3:window.location.reload(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),children:"Make Artist"}),Object(h.jsx)(ee.b,{color:"danger",onClick:function(){v()({title:"Are you sure?",text:"Once deleted, user wont be able to login or access their accounts.",icon:"warning",buttons:!0,dangerMode:!0}).then(function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,w.a.delete("/users/".concat(e._id));case 3:return t.next=5,u();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},children:"Delete"})]})}}],u=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/users");case 2:t=e.sent,n=t.data,r(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){u()}),[]),Object(h.jsx)(Y,{children:Object(h.jsxs)(ee.l,{children:[Object(h.jsx)(ee.g,{md:8,children:Object(h.jsx)(Z,{onSearch:l,showPagination:!1,columns:o,rows:n.filter((function(e){return""===i||Object.keys(e).some((function(t){var n,a,r;return null===(n=e[t])||void 0===n||null===(a=n.toString())||void 0===a||null===(r=a.toLowerCase())||void 0===r?void 0:r.includes(i)}))}))})}),Object(h.jsx)(ee.g,{md:4,children:Object(h.jsx)(be,{refetch:u})})]})})})),me("/admins",(function(){var e=Object(a.useState)([]),t=Object(U.a)(e,2),n=t[0],r=t[1],c=[{name:"ID",selector:function(e,t){return t+1}},{name:"Name",selector:function(e){return e.name}},{name:"Email",selector:function(e){return e.email}},{name:"Options",selector:function(e){return Object(h.jsx)("div",{children:Object(h.jsx)(ee.b,{color:"danger",onClick:function(){v()({title:"Are you sure?",text:"Once deleted, the admin wont be able to login or access their account data.",icon:"warning",buttons:!0,dangerMode:!0}).then((function(t){t&&function(e){i.apply(this,arguments)}(e._id)}))},children:"Delete"})})}}],s=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/users/admins");case 2:t=e.sent,n=t.data,r(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function i(){return(i=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.delete("/users/admins/".concat(t));case 2:return e.next=4,s();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){s()}),[]),Object(h.jsx)(Y,{children:Object(h.jsx)(Z,{showSearch:!1,showPagination:!1,columns:c,rows:n})})}))],Oe=n(138);n(300);w.a.defaults.baseURL=oe.api;var xe=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.a,{children:Object(h.jsx)(o.d,{children:he.map((function(e,t){return Object(a.createElement)(o.b,Object(i.a)(Object(i.a)({},e),{},{key:t}))}))})}),Object(h.jsx)(Oe.a,{})]})};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(xe,{})}),document.getElementById("root"))}},[[301,1,2]]]);
//# sourceMappingURL=main.3186ce1c.chunk.js.map